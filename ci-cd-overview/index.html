
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://azure.github.io/enterprise-azure-policy-as-code/ci-cd-overview/">
      
      
        <link rel="prev" href="../integrating-with-slz/">
      
      
        <link rel="next" href="../ci-cd-app-registrations/">
      
      
      <link rel="icon" href="../Images/10316-icon-service-Policy.svg">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.5.17">
    
    
      
        <title>CI/CD Overview - Enterprise Policy As Code (EPAC)</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.bcfcd587.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="black" data-md-color-accent="blue">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#cicd-overview" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Enterprise Policy As Code (EPAC)" class="md-header__button md-logo" aria-label="Enterprise Policy As Code (EPAC)" data-md-component="logo">
      
  <img src="../Images/10316-icon-service-Policy.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Enterprise Policy As Code (EPAC)
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              CI/CD Overview
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/Azure/enterprise-azure-policy-as-code" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href=".." class="md-tabs__link">
        
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../epac-implementing/" class="md-tabs__link">
          
  
    
  
  Getting Started

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../settings-global-setting-file/" class="md-tabs__link">
          
  
    
  
  Settings and Desired State

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../policy-definitions/" class="md-tabs__link">
          
  
    
  
  Define Policy Resources

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../integrating-with-alz/" class="md-tabs__link">
          
  
    
  
  Azure Landing Zones

        </a>
      </li>
    
  

      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="./" class="md-tabs__link">
          
  
    
  
  CI/CD Integration

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../operational-scripts/" class="md-tabs__link">
          
  
    
  
  Operational Scripts

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Enterprise Policy As Code (EPAC)" class="md-nav__button md-logo" aria-label="Enterprise Policy As Code (EPAC)" data-md-component="logo">
      
  <img src="../Images/10316-icon-service-Policy.svg" alt="logo">

    </a>
    Enterprise Policy As Code (EPAC)
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/Azure/enterprise-azure-policy-as-code" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Getting Started
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Getting Started
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../epac-implementing/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Implementing
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../epac-extracting-policy-resources/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Extracting Policy Resources
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../epac-forking-github-repo/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Forking GitHub Repo
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Settings and Desired State
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Settings and Desired State
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../settings-global-setting-file/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Global Settings
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../settings-desired-state/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Desired State
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../settings-dfc-assignments/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    DfC Assignments
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Define Policy Resources
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Define Policy Resources
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../policy-definitions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Policy Definitions
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../policy-set-definitions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Policy Set Definitions
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../policy-assignments/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Policy Assignment Files
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../policy-assignments-csv-parameters/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    CSV Assignment Parameters
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../policy-exemptions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Policy Exemptions
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Azure Landing Zones
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Azure Landing Zones
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../integrating-with-alz/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ALZ Policy Integration
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../integrating-with-alz-monitor/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Azure Monitor Baseline Alerts
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../integrating-with-slz/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Sovereign Landing Zones
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" checked>
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="">
            
  
  <span class="md-ellipsis">
    CI/CD Integration
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            CI/CD Integration
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    CI/CD Overview
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    CI/CD Overview
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#create-azure-devops-pipelines-or-github-workflows" class="md-nav__link">
    <span class="md-ellipsis">
      Create Azure DevOps Pipelines or GitHub Workflows
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Create Azure DevOps Pipelines or GitHub Workflows">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#azure-devops-pipelines" class="md-nav__link">
    <span class="md-ellipsis">
      Azure DevOps Pipelines
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#github-workflows" class="md-nav__link">
    <span class="md-ellipsis">
      GitHub Workflows
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#developing-policy-resources-in-a-feature-branch" class="md-nav__link">
    <span class="md-ellipsis">
      Developing Policy Resources in a Feature Branch
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#general-hardening-guidelines" class="md-nav__link">
    <span class="md-ellipsis">
      General Hardening Guidelines
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#simplified-github-flow-for-policy-as-code" class="md-nav__link">
    <span class="md-ellipsis">
      Simplified GitHub Flow for Policy as Code
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Simplified GitHub Flow for Policy as Code">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#github-flow-variations" class="md-nav__link">
    <span class="md-ellipsis">
      GitHub Flow Variations
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#advanced-cicd-with-release-flow" class="md-nav__link">
    <span class="md-ellipsis">
      Advanced CI/CD with Release Flow
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Advanced CI/CD with Release Flow">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#release-flow-variations" class="md-nav__link">
    <span class="md-ellipsis">
      Release Flow Variations
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#multiple-tenants" class="md-nav__link">
    <span class="md-ellipsis">
      Multiple Tenants
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#deployment-scripts" class="md-nav__link">
    <span class="md-ellipsis">
      Deployment Scripts
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Deployment Scripts">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#common-script-parameters" class="md-nav__link">
    <span class="md-ellipsis">
      Common Script Parameters
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#build-deploymentplansps1" class="md-nav__link">
    <span class="md-ellipsis">
      Build-DeploymentPlans.ps1
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deploy-policyplanps1" class="md-nav__link">
    <span class="md-ellipsis">
      Deploy-PolicyPlan.ps1
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deploy-rolesplanps1" class="md-nav__link">
    <span class="md-ellipsis">
      Deploy-RolesPlan.ps1
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ci-cd-app-registrations/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    App Registrations Setup
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ci-cd-ado-pipelines/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Azure DevOps Pipelines
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ci-cd-github-actions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    GitHub Actions
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Operational Scripts
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            Operational Scripts
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../operational-scripts/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Scripts Overview
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../operational-scripts-documenting-policy/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Documenting Policy
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../operational-scripts-hydration-kit/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Hydration Kit
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../operational-scripts-reference/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Reference
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#create-azure-devops-pipelines-or-github-workflows" class="md-nav__link">
    <span class="md-ellipsis">
      Create Azure DevOps Pipelines or GitHub Workflows
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Create Azure DevOps Pipelines or GitHub Workflows">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#azure-devops-pipelines" class="md-nav__link">
    <span class="md-ellipsis">
      Azure DevOps Pipelines
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#github-workflows" class="md-nav__link">
    <span class="md-ellipsis">
      GitHub Workflows
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#developing-policy-resources-in-a-feature-branch" class="md-nav__link">
    <span class="md-ellipsis">
      Developing Policy Resources in a Feature Branch
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#general-hardening-guidelines" class="md-nav__link">
    <span class="md-ellipsis">
      General Hardening Guidelines
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#simplified-github-flow-for-policy-as-code" class="md-nav__link">
    <span class="md-ellipsis">
      Simplified GitHub Flow for Policy as Code
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Simplified GitHub Flow for Policy as Code">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#github-flow-variations" class="md-nav__link">
    <span class="md-ellipsis">
      GitHub Flow Variations
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#advanced-cicd-with-release-flow" class="md-nav__link">
    <span class="md-ellipsis">
      Advanced CI/CD with Release Flow
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Advanced CI/CD with Release Flow">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#release-flow-variations" class="md-nav__link">
    <span class="md-ellipsis">
      Release Flow Variations
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#multiple-tenants" class="md-nav__link">
    <span class="md-ellipsis">
      Multiple Tenants
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#deployment-scripts" class="md-nav__link">
    <span class="md-ellipsis">
      Deployment Scripts
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Deployment Scripts">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#common-script-parameters" class="md-nav__link">
    <span class="md-ellipsis">
      Common Script Parameters
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#build-deploymentplansps1" class="md-nav__link">
    <span class="md-ellipsis">
      Build-DeploymentPlans.ps1
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deploy-policyplanps1" class="md-nav__link">
    <span class="md-ellipsis">
      Deploy-PolicyPlan.ps1
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deploy-rolesplanps1" class="md-nav__link">
    <span class="md-ellipsis">
      Deploy-RolesPlan.ps1
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="cicd-overview">CI/CD Overview</h1>
<p>Since EPAC is based on PowerShell scripts, any CI/CD tool with the ability to execute scripts can be used. The starter kits currently include pipeline definitions for Azure DevOps and GitHub Actions. Additional starter kits are being implemented and will be added in future releases.</p>
<p>The authors are interested in supporting other deployment pipelines. If you have developed pipelines for other technologies, such as GitLab, Jenkins, etc., please contribute them to the project as additional starter kits.</p>
<p>This repository contains starter pipelines and instructions for can be found here:</p>
<ul>
<li><a href="../ci-cd-ado-pipelines/">Azure DevOps Pipelines</a></li>
<li><a href="../ci-cd-github-actions/">GitHub Actions</a></li>
</ul>
<h2 id="create-azure-devops-pipelines-or-github-workflows">Create Azure DevOps Pipelines or GitHub Workflows</h2>
<p>The scripts <code>New-PipelinesFromStarterKit</code> create <a href="../operational-scripts-hydration-kit/#create-azure-devops-pipeline-or-github-workflow">Azure DevOps Pipelines or GitHub Workflows from the starter kit</a>. You select the type of pipeline to create, the branching flow to implement, and the type of script to use.</p>
<h3 id="azure-devops-pipelines">Azure DevOps Pipelines</h3>
<p>The following commands create Azure DevOps Pipelines from the starter kit; use one of the commands:</p>
<div class="highlight"><pre><span></span><code><span class="nb">New-PipelinesFromStarterKit</span> <span class="n">-StarterKitFolder</span> <span class="p">.\</span><span class="n">StarterKit</span> <span class="n">-PipelinesFolder</span> <span class="p">.\</span><span class="n">pipelines</span> <span class="n">-PipelineType</span> <span class="n">AzureDevOps</span> <span class="n">-BranchingFlow</span> <span class="n">GitHub</span> <span class="n">-ScriptType</span> <span class="n">script</span>
<span class="nb">New-PipelinesFromStarterKit</span> <span class="n">-StarterKitFolder</span> <span class="p">.\</span><span class="n">StarterKit</span> <span class="n">-PipelinesFolder</span> <span class="p">.\</span><span class="n">pipelines</span> <span class="n">-PipelineType</span> <span class="n">AzureDevOps</span> <span class="n">-BranchingFlow</span> <span class="n">Release</span> <span class="n">-ScriptType</span> <span class="n">script</span>
<span class="nb">New-PipelinesFromStarterKit</span> <span class="n">-StarterKitFolder</span> <span class="p">.\</span><span class="n">StarterKit</span> <span class="n">-PipelinesFolder</span> <span class="p">.\</span><span class="n">pipelines</span> <span class="n">-PipelineType</span> <span class="n">AzureDevOps</span> <span class="n">-BranchingFlow</span> <span class="n">GitHub</span> <span class="n">-ScriptType</span> <span class="n">module</span>
<span class="nb">New-PipelinesFromStarterKit</span> <span class="n">-StarterKitFolder</span> <span class="p">.\</span><span class="n">StarterKit</span> <span class="n">-PipelinesFolder</span> <span class="p">.\</span><span class="n">pipelines</span> <span class="n">-PipelineType</span> <span class="n">AzureDevOps</span> <span class="n">-BranchingFlow</span> <span class="n">Release</span> <span class="n">-ScriptType</span> <span class="n">module</span>
</code></pre></div>
<h3 id="github-workflows">GitHub Workflows</h3>
<p>The following commands create GitHub Workflows from the starter kit; use one of the commands:</p>
<div class="highlight"><pre><span></span><code><span class="nb">New-PipelinesFromStarterKit</span> <span class="n">-StarterKitFolder</span> <span class="p">.\</span><span class="n">StarterKit</span> <span class="n">-PipelinesFolder</span> <span class="p">.\.</span><span class="n">github</span><span class="p">/</span><span class="n">workflows</span> <span class="n">-PipelineType</span> <span class="n">GitHubActions</span> <span class="n">-BranchingFlow</span> <span class="n">GitHub</span> <span class="n">-ScriptType</span> <span class="n">script</span>
<span class="nb">New-PipelinesFromStarterKit</span> <span class="n">-StarterKitFolder</span> <span class="p">.\</span><span class="n">StarterKit</span> <span class="n">-PipelinesFolder</span> <span class="p">.\.</span><span class="n">github</span><span class="p">/</span><span class="n">workflows</span> <span class="n">-PipelineType</span> <span class="n">GitHubActions</span> <span class="n">-BranchingFlow</span> <span class="n">Release</span> <span class="n">-ScriptType</span> <span class="n">script</span>
<span class="nb">New-PipelinesFromStarterKit</span> <span class="n">-StarterKitFolder</span> <span class="p">.\</span><span class="n">StarterKit</span> <span class="n">-PipelinesFolder</span> <span class="p">.\.</span><span class="n">github</span><span class="p">/</span><span class="n">workflows</span> <span class="n">-PipelineType</span> <span class="n">GitHubActions</span> <span class="n">-BranchingFlow</span> <span class="n">GitHub</span> <span class="n">-ScriptType</span> <span class="n">module</span>
<span class="nb">New-PipelinesFromStarterKit</span> <span class="n">-StarterKitFolder</span> <span class="p">.\</span><span class="n">StarterKit</span> <span class="n">-PipelinesFolder</span> <span class="p">.\.</span><span class="n">github</span><span class="p">/</span><span class="n">workflows</span> <span class="n">-PipelineType</span> <span class="n">GitHubActions</span> <span class="n">-BranchingFlow</span> <span class="n">Release</span> <span class="n">-ScriptType</span> <span class="n">module</span>
</code></pre></div>
<h2 id="developing-policy-resources-in-a-feature-branch">Developing Policy Resources in a Feature Branch</h2>
<p>Developing Policy resources is the dame for <code>GitHub Flow</code> and <code>Release Flow</code>. The following steps are recommended:</p>
<ol>
<li>Developers create feature branches from <code>main</code> branch with a name <code>feature/*user-id*/*feature-name*</code>.</li>
<li>Developers create or update Policy definitions, Policy Set definitions, Policy Assignment, amd Policy Exemptions files in the <code>Definitions</code> folder. Developers push changes to the feature branch.</li>
<li>The CI/CD pipeline/action is triggered from the push to the feature branch. We recommend to use a single App Registration (SPN) to execute pipeline/action during development. The SPN must have <code>Owner</code> rights to the <code>epac-dev</code> Management Group and the Microsoft Graph permissions described below. The steps are:<ul>
<li>Build-DeploymentPlans.ps1 to calculate the deployment plan</li>
<li>Deploy-PolicyPlan.ps1 to deploy the plan's Policy Resources</li>
<li>Deploy-RolesPlan.ps1 to create the role assignments for the Managed Identities required for <code>DeployIfNotExists</code> and <code>Modify</code> Policies.</li>
<li>The starter pipelines calculate the Plans for tenant(s). The Plans are stored in the <code>Output</code> folder.</li>
</ul>
</li>
<li>When the feature is ready, the developer creates a Pull Request (PR) to merge the feature branch into the <code>main</code> branch.</li>
<li>Set the pull request to be auto-completed. Ensure that you select <code>Delete feature/*user-id*/*feature-name* after merging</code>.</li>
</ol>
<p><img alt="image.png" src="../Images/ci-cd-set-auto-complete.png" /></p>
<ol>
<li>After the merge completes, cleanup your local clone by:<ul>
<li>Switching the branch to main</li>
<li>Pull the latest changes from main</li>
<li>Delete the feature branch</li>
<li>Run <code>git remote prune origin</code> to remove the remote tracking branch.</li>
</ul>
</li>
</ol>
<p>Steps 1 to 3 are repeated during the development process.</p>
<p>The resulting pipeline CI/CD trigger depends on the type of flow used. The following sections describe the simplified <code>GitHub Flow</code> and the more advanced <code>Release Flow</code>.</p>
<h2 id="general-hardening-guidelines">General Hardening Guidelines</h2>
<ul>
<li><strong>Least Privilege</strong>: Use the least privilege principle when assigning roles to the SPNs used in the CI/CD pipeline. The roles should be assigned at the root or pseudo-root management group level.</li>
<li>Require a Pull Request for changes to the <code>main</code> branch. This ensures that changes are reviewed before deployment.</li>
<li>Require additional reviewers for yml pipeline and script changes.</li>
<li>Require branches to be in a folder <code>feature</code> to prevent accidental deployment of branches.</li>
<li>Require an approval step between the Plan stage/job and the Deploy stage/job. This ensures that the changes are reviewed before deployment.</li>
<li>[Optional] Require an approval step between the Deploy stage/job and the Role Assignments stage/job. This ensures that the role assignments are reviewed before deployment.</li>
<li>For <code>Release Flow</code> only: allow only privileged users to create <code>releases-prod</code> and <code>releases-exemptions-only</code> branches and require those branches to be created from the main branch only.</li>
</ul>
<h2 id="simplified-github-flow-for-policy-as-code">Simplified <code>GitHub Flow</code> for Policy as Code</h2>
<p>The diagram below shows the use of GitHub Flow in Policy as Code. The diagram uses GitHub workflow terminology; however, the concepts apply equally to other CI/CD technologies.</p>
<p>The merge of the PR into the <code>main</code> branch triggers the CI/CD pipeline/action to deploy the changes to the <code>tenant</code> environment.</p>
<p>Since these deployments are most often deployed at the pseudo root of the tenant, we recommend creating a separate App Registration (SPN) for each of the 3 steps with roles assigned in line with the least privilege principle. The steps are:</p>
<ul>
<li>Build-DeploymentPlans.ps1 to calculate the deployment plan. SPN must have <code>EPAC Resource Policy Reader</code> custom role on the root or pseudo-root management group and the Microsoft Graph permissions described below.</li>
<li>Approval gate for Policy resources deployment.</li>
<li>Deploy-PolicyPlan.ps1 to deploy the plan's Policy Resources. SPN must have <code>Resource Policy Contributor</code> built-in role on the root or pseudo-root management group. Microsoft Graph permissions are not required.</li>
<li>Approval gate for Role assignments deployment.</li>
<li>Deploy-RolesPlan.ps1 to create the role assignments for the Managed Identities required for <code>DeployIfNotExists</code> and <code>Modify</code> Policies. SPN must have <code>User Access Administrator</code> built-in role on the root or pseudo-root management group and the Microsoft Graph permissions described below.</li>
</ul>
<p><img alt="image.png" src="../Images/epac-github-flow.png" /></p>
<h3 id="github-flow-variations"><code>GitHub Flow</code> Variations</h3>
<p>EPAC can handle any flow you like. For <code>GitHub Flow</code>, the following variations are possible.</p>
<ul>
<li>Adding a deployment plan from the feature branch to the production environment in step 3 above during the development process (see steps 1 through 3 in the diagram above) by adding a step using Build-DeploymentPlans.ps1. This is useful to test the deployment plan in the production environment before creating a PR. We recommend using a separate SPN for this step (job).</li>
<li>PR creation trigger for a CI/CD pipeline/action deploying the changes to an <code>epac-test</code> environment with the same steps as the deployment to <code>epac-dev</code> environment in steps 3 above.</li>
</ul>
<h2 id="advanced-cicd-with-release-flow">Advanced CI/CD with Release Flow</h2>
<p>Testing the Policy changes against the IaC <code>nonprod</code> environment is often desirable to prevent surprises when deploying against the IaC <code>prod</code> environment. IaC environments can either be separate tenants or management groups within a single tenant (recommended).</p>
<p><a href="https://devblogs.microsoft.com/devops/release-flow-how-we-do-branching-on-the-vsts-team/">Release Flow</a> is a more advanced CI/CD process that allows for testing the Policy changes against the IaC <code>nonprod</code> environment before deploying to the IaC <code>prod</code> environment as shown in the diagram below.</p>
<ul>
<li>The merge of the PR into the <code>main</code> branch triggers the CI/CD pipeline/action to deploy the changes to the IaC <code>nonprod</code> environment.</li>
<li>Wait a few days to verify that the Policies in the IaC <code>nonprod</code> environment are working as expected.</li>
<li>Creating a <code>releases-prod</code> branch triggers a pipeline deploying Policy resources to the IaC <code>prod</code> environment.</li>
<li>Keep n-1 <code>releases-prod</code> branches to allow for quick rollback in case of issues.</li>
<li>Sometimes, Exemptions need to be granted while keeping a regular lifecycle for Definitions and Assignments. The script <code>Build-DeploymentPlans</code> has a parameter <code>BuildExemptionsOnly</code> to deploy only Exemptions.</li>
<li>Creating a <code>releases-exemptions-only</code> branch triggers a pipeline deploying Exemptions only to the IaC <code>prod</code> environment.</li>
<li>Keep n-1 <code>releases-exemptions-only</code> branches to allow for quick rollback in case of issues.</li>
</ul>
<p>If necessary, you can also branch of the <code>releases-prod</code> branch to create a <code>hotfix</code> branch to fix issues in the <code>prod</code> environment. Similar to the development process, the <code>hotfix</code> branch is merged into the <code>releases-prod</code> branch with a Pull request.</p>
<p><img alt="image.png" src="../Images/epac-release-flow.png" /></p>
<h3 id="release-flow-variations"><code>Release Flow</code> Variations</h3>
<p>EPAC can handle any flow you like. For <code>Release Flow</code>, the following variations are possible.</p>
<ul>
<li>Adding a deployment plan from the feature branch to the production environment in step 3 above during the development process (see steps 1 through 3 in the diagram above) by adding a step using Build-DeploymentPlans.ps1. This is useful to test the deployment plan in the production environment before creating a PR. We recommend using a separate SPN for this step (job).</li>
<li>PR creation trigger for a CI/CD pipeline/action deploying the changes to an <code>epac-test</code> environment with the same steps as the deployment to <code>epac-dev</code> environment in steps 3 above.</li>
</ul>
<h2 id="multiple-tenants">Multiple Tenants</h2>
<p>For multiple tenants simply apply each of the flows (except for the <code>feature</code> branch) above to each tenant's IaC environments. This works for both simplified GitHub flow and Microsoft Release flow.</p>
<h2 id="deployment-scripts">Deployment Scripts</h2>
<p>While the scripts are intended to be used in CI/CD, they can be run manually to create a semi-automated EPAC solution. This is useful:</p>
<ul>
<li>CI/CD environment is not yet available.</li>
<li>Debugging the scripts from Visual Studio Code.</li>
</ul>
<p>Deployment scripts require permissions to the Azure environment and Microsoft Graph API. In a CI/CD scenario, App Registration (SPNs) are used to execute the scripts. These identities must be granted the necessay permissions as documented in <a href="../ci-cd-app-registrations/">App Registrations Setup</a>. In a semi-automated scenario, the user executing the scripts must have the necessary permissions. The scripts will prompt for the necessary permissions.</p>
<p>The image below shows the scripts and the roles required for their execution.</p>
<ul>
<li><code>Build-DeploymentPlans.ps1</code> requires <code>EPAC Resource Policy Reader</code> custom role on the root or pseudo-root management group and the Microsoft Graph permissions described below.</li>
<li><code>Deploy-PolicyPlan.ps1</code> requires <code>Resource Policy Contributor</code> built-in role on the root or pseudo-root management group. Microsoft Graph permissions are not required.</li>
<li><code>Deploy-RolesPlan.ps1</code> requires <code>User Access Administrator</code> built-in role on the root or pseudo-root management group and the Microsoft Graph permissions described below.</li>
</ul>
<p>Furthermore, it shows the consumption of the <code>Definitions</code> files by script Build-DeploymentPlans.ps1 and output of two plan files (Policy and Roles). The plan files are subsequently used by the deployment scripts <code>Deploy-PolicyPlan.ps1</code> and <code>Deploy-RolesPlan.ps1</code>.</p>
<p><img alt="image.pmg" src="../Images/epac-deployment-scripts.png" /></p>
<h3 id="common-script-parameters">Common Script Parameters</h3>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Explanation</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>PacEnvironmentSelector</code></td>
<td>Selects the EPAC environment for this plan. If omitted, interactively prompts for the value.</td>
</tr>
<tr>
<td><code>DefinitionsRootFolder</code></td>
<td>Definitions folder path. Defaults to environment variable <code>$env:PAC_DEFINITIONS_FOLDER</code> or <code>./Definitions</code>. It must contain file <code>global-settings.jsonc</code>.</td>
</tr>
<tr>
<td><code>Interactive</code></td>
<td>Defaults to <code>$false</code>.</td>
</tr>
</tbody>
</table>
<h3 id="build-deploymentplansps1">Build-DeploymentPlans.ps1</h3>
<p>Analyzes changes in Policy definition, Policy Set definition, and Policy Assignment files. It calculates a plan to apply deltas. The deployment scripts are <strong>declarative</strong> and <strong>idempotent</strong>: this means, that regardless how many times they are run, they always push all changes that were implemented in the JSON files to the Azure environment, i.e. if a JSON file is newly created/updated/deleted, the pipeline will create/update/delete the Policy and/or Policy Set and/or Policy Assignments definition in Azure. If there are no changes, the pipeline can be run any number of times, as it won't make any changes to Azure.</p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Explanation</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>OutputFolder</code></td>
<td>Output folder path for plan files. Defaults to environment variable <code>$env:PAC_OUTPUT_FOLDER</code> or <code>./Output</code>.</td>
</tr>
<tr>
<td><code>DevOpsType</code></td>
<td>If set, outputs variables consumable by conditions in a DevOps pipeline. Default: not set.</td>
</tr>
<tr>
<td><code>BuildExemptionsOnly</code></td>
<td>If set, only builds the Exemptions plan. This useful to fast-track Exemption when utilizing <a href="#advanced-cicd-with-microsoft-release-flow">Microsoft Release Flow</a> Default: not set.</td>
</tr>
<tr>
<td><code>VirtualCores</code></td>
<td>Number of (virtual) cores available to calculate the deployment plan. Defaults to 4.</td>
</tr>
</tbody>
</table>
<h3 id="deploy-policyplanps1">Deploy-PolicyPlan.ps1</h3>
<p>Deploys Policies, Policy Sets, Policy Assignments, and Policy Exemptions at their desired scope based on the plan.</p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Explanation</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>InputFolder</code></td>
<td>Input folder path for plan files. Defaults to environment variable <code>$env:PAC_INPUT_FOLDER</code>, <code>$env:PAC_OUTPUT_FOLDER</code> or <code>./Output</code>.</td>
</tr>
<tr>
<td><code>VirtualCores</code></td>
<td>Number of (virtual) cores available to deploy Policy objects in parallel. Defaults to 4.</td>
</tr>
</tbody>
</table>
<h3 id="deploy-rolesplanps1">Deploy-RolesPlan.ps1</h3>
<p>Creates the role assignments for the Managed Identities required for <code>DeployIfNotExists</code> and <code>Modify</code> Policies.</p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Explanation</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>InputFolder</code></td>
<td>Input folder path for plan files. Defaults to environment variable <code>$env:PAC_INPUT_FOLDER</code>, <code>$env:PAC_OUTPUT_FOLDER</code> or <code>./Output</code>.</td>
</tr>
</tbody>
</table>












                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var tab,labels=set.querySelector(".tabbed-labels");for(tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "..", "features": ["navigation.instant", "navigation.indexes", {"navigation.sections": {"level": 1}}, "navigation.tabs", "navigation.tabs.sticky", "content.code.annotate", "content.tabs.link", "content.code.copy"], "search": "../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.1e8ae164.min.js"></script>
      
    
  </body>
</html>